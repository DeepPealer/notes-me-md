ёё-ёёags: [data-engineering, data-lake, data-warehouse, bigdata, etl, elt, interviewprep]  
alias: [Озеро данных, Data Lake]  
related: [[Data Warehousing (DWH), Iёnmon vs Kimball Methodologies]], [[ETL / ELT Concepts]], ёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёёылкам с этикетками и готова к употреблению.
    
- **Озеро данных** — это **настоящее природное озеро**. В него впадают разные реки (источники данных), и оно содержит воду в ее естественном, необработанном виде. Вы можете взять воду из озера и отфильтровать ее для питья, использовать для полива или просто изучать ее состав.
    

---

### Ключевые характеристики Data Lake

1. **Хранение любых данных**: В озеро можно загружать структурированные данные (из баз данных), полуструктурированные (JSON, XML, логи) и полностью неструктурированные (изображения, видео, аудио, PDF).
    
2. **Schema-on-Read**: Структура данных определяется не в момент их загрузки, а в момент их обработки и анализа. Это дает огромную гибкость, так как одни и те же сырые данные можно использовать для разных задач, применяя к ним разные схемы.
    
3. **Разделение хранения и вычислений (Decoupling)**: Это фундаментальный принцип.
    
    - **Хранение**: Обычно осуществляется на базе дешевых, масштабируемых объектных хранилищ, таких как **Amazon S3**, **Google Cloud Storage (GCS)** или **Azure Blob Storage**.
        
    - **Вычисления**: Выполняются с помощью различных инструментов ([[MapReduce and Massively Parallel Processing (MPP)|Spark]], Presto, Dremio), которые обращаются к данным в озере, производят вычисления и завершают свою работу.
        
4. **Масштабируемость и экономичность**: Благодаря использованию облачных объектных хранилищ, озера данных могут легко масштабироваться до петабайт и эксабайт данных за очень низкую стоимость.
    
5. **Роль в [[ETL / ELT Concepts|ELT]]**: Озеро данных является идеальным местом назначения для этапов **E (Extract)** и **L (Load)** в ELT-процессе.
    

---

### Data Lake vs. Data Warehouse

Это самый частый вопрос на собеседованиях по этой теме.

|   |   |   |
|---|---|---|
|Характеристика|Data Lake (Озеро данных)|Data Warehouse (Хранилище данных)|
|**Данные**|Сырые, любые форматы (структурированные, неструктурированные)|Обработанные, очищенные, структурированные|
|**Схема**|**Schema-on-Read** (схема при чтении)|**Schema-on-Write** (схема при записи)|
|**Основная цель**|Хранение, исследование, Data Science, ML|Бизнес-аналитика (BI), отчетность|
|**Пользователи**|Data Scientist'ы, Инженеры данных|Бизнес-аналитики, менеджеры|
|**Скорость**|Медленнее для анализа (требуется обработка)|Очень быстро для структурированных запросов|
|**Гибкость**|**Очень высокая**|Низкая, так как структура фиксирована|
|**Стоимость**|Низкая стоимость хранения|Высокая стоимость хранения и обработки|

---

### Проблема "Болота данных" (Data Swamp)

Без должного управления озеро данных может легко превратиться в "болото данных" — свалку непонятных, недокументированных и некачественных данных, которыми невозможно пользоваться.

**Решение — Data Lakehouse (Озеро-хранилище)**

Lakehouse — это современная архитектура, которая пытается объединить лучшее из обоих миров:

- **Гибкость и низкую стоимость хранения** от Озера данных.
    
- **Надежность, транзакционность (ACID) и производительность** от Хранилища данных.
    

Это достигается за счет внедрения **слоя метаданных и управления** поверх озера данных.

**Ключевые технологии для Lakehouse**:

- **Форматы таблиц**: **Apache Iceberg**, **Delta Lake**, **Apache Hudi**. Эти форматы привносят функциональность, подобную базам данных (транзакции, версионирование, time travel), в мир озер данных.
    
- **Движки запросов**: Spark, Trino (ранее PrestoSQL), Dremio.
    

---

### Популярные вопросы на собеседовании

- **"В чем ключевое различие между Data Lake и Data Warehouse?"**
    
- **"Что такое 'Schema-on-Read' и почему это важно для Data Lake?"**
    
    - Ответ: Это принцип, при котором данные загружаются в их исходном виде, а структура (схема) применяется к ним уже в процессе анализа. Это дает гибкость, позволяя использовать одни и те же сырые данные для разных целей и задач, которые могут быть неизвестны в момент загрузки.
        
- **"Когда вы бы порекомендовали использовать Data Lake, а когда — Data Warehouse?"**
    
    - Ответ: Я бы порекомендовал Data Lake, когда нужно хранить большие объемы разнородных данных для будущих исследований, машинного обучения или когда конечные цели анализа еще не ясны. Я бы выбрал Data Warehouse для построения стандартизированной корпоративной отчетности и BI-дашбордов, где требуется высокая производительность и согласованность данных.
        
- **"Как избежать превращения озера данных в болото?"**
    
    - Ответ: Необходимо внедрить процессы управления данными (Data Governance): создать каталог данных (Data Catalog) для документирования источников и метаданных, внедрить контроль качества данных (Data Quality) и управлять жизненным циклом данных (Data Lifecycle Management).
        
- **"Что такое Data Lakehouse?"**
    
    - Ответ: Это новая архитектура, которая пытается совместить преимущества озер и хранилищ, добавляя транзакционность и управление данными поверх дешевого объектного хранения с помощью таких технологий, как Delta Lake или Apache Iceberg.