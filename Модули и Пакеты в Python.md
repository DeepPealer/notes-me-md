tags: [python, programming, core-python, interviewprep]  
alias: [Python Modules, Python Packages, Импорты в Python]  
related: [[Python]], [[Объектно-ориентированное программирование в Python (ООП)]]

Модули и пакеты — это основные инструменты Python для структурирования кода. Они позволяют разбивать большие программы на логические части, повторно использовать код и избегать конфликтов имен.

---

## [[Модули (Modules) в Python]]

**Модуль** — это любой файл с расширением .py. Этот файл может содержать определения функций, классов и переменных, а также исполняемый код.

**Идея**: Вместо того чтобы писать весь код в одном файле, мы разделяем его на несколько тематических модулей. Например, все функции для работы с числами Фибоначчи можно поместить в файл fibo.py.

### Способы импорта

1. **import <module_name>**
    
    - Импортирует модуль целиком. Для доступа к его содержимому нужно использовать "точечную нотацию": module_name.function_name.
        
    - Этот способ **предпочтителен**, так как он не загрязняет текущее пространство имен и явно показывает, откуда берется функция или класс.
    
```python
# file: fibo.py
def fib(n):
    # ...
def fib2(n):
    # ...

# file: main.py
import fibo

print(fibo.fib(100)) # Явно указываем, что fib из модуля fibo
```


from <module_name> import <1>, <2>

- Импортирует конкретные имена (функции, классы) из модуля прямо в текущее пространство имен.
    
- Удобно, но может привести к конфликту, если у вас уже есть переменная с таким же именем.

```python
# file: main.py
from fibo import fib, fib2

print(fib(100)) # Можно вызывать напрямую
```

1. **from <module_name> import * — ОПАСНО!**
    
    - Импортирует все публичные имена из модуля.
        
    - **Считается плохой практикой!** Это делает код нечитаемым (непонятно, откуда пришло то или иное имя) и может незаметно перезаписать ваши собственные переменные и функции.

### Идиома if \_\_name\_\_ == '\_\_main\_\_':

Это критически важная конструкция для любого модуля.

- Когда Python-файл запускается как основной скрипт, его специальная переменная __name__ устанавливается в значение '__main__'.
    
- Когда файл импортируется как модуль, его __name__ устанавливается в имя этого модуля (имя файла).
    

Это позволяет нам писать код, который будет выполняться **только при прямом запуске файла**, а не при его импорте. Идеально для тестов, демонстраций или создания утилиты командной строки на основе модуля.
```python
# file: fibo.py
def fib(n):
    # ...

# Этот блок выполнится, только если запустить "python fibo.py"
# Он не выполнится, если сделать "import fibo" в другом файле
if __name__ == '__main__':
    print("Running fibo module as a script!")
    print(fib(50))
```

## [[Пакеты (Packages) в Python]]

**Пакет** — это способ структурировать пространство имен модулей с помощью "точечной нотации". По сути, это **директория с модулями**, которая содержит специальный файл __init__.py.

**Идея**: Когда проект разрастается, мы группируем связанные модули в директории (пакеты).

### Структура пакета

```
sound/                  <-- Верхнеуровневый пакет
├── __init__.py         <-- Обязательный файл, делает директорию пакетом
├── formats/            <-- Подпакет
│   ├── __init__.py
│   ├── wavread.py
│   └── wavwrite.py
└── effects/            <-- Другой подпакет
    ├── __init__.py
    ├── echo.py
    └── surround.py
```
### Файл \_\_init\_\_.py

- **Основная роль**: Говорит интерпретатору Python, что данная директория является пакетом. Файл может быть пустым.
    
- **Дополнительная роль**: Код в __init__.py выполняется при импорте пакета. Это можно использовать для инициализации пакета, определения переменной __all__ (чтобы указать, что импортируется при from package import *) или для автоматического импорта подмодулей.
    

### Импорт из пакетов

```python
# Способ 1: Полный путь
import sound.effects.echo
sound.effects.echo.echofilter(...)

# Способ 2: Импорт подмодуля
from sound.effects import echo
echo.echofilter(...)

# Способ 3: Импорт конкретной функции
from sound.effects.echo import echofilter
echofilter(...)
```

### Относительные импорты (Intra-package)

Внутри одного пакета модули могут ссылаться друг на друга с помощью относительных импортов.

```python
# Внутри файла sound/effects/surround.py

# Импортируем модуль echo из того же пакета (effects)
from . import echo

# Импортируем модуль wavread из соседнего пакета (formats)
from ..formats import wavread
```

. — текущий пакет.  
.. — родительский пакет.

---

### Популярные вопросы на собеседовании

- **"В чем разница между модулем и пакетом?"**
    
    - Ответ: Модуль — это один файл .py. Пакет — это директория, содержащая другие модули и подпакеты, и обязательно файл __init__.py. Пакет — это способ организации модулей.
        
- **"Для чего нужен файл __init__.py?"**
    
    - Ответ: Во-первых, он помечает директорию как пакет Python. Во-вторых, код в нем выполняется при импорте пакета, что позволяет выполнять инициализацию.
        
- **"Почему from module import * — это плохая идея?"**
    
    - Ответ: Это загрязняет пространство имен, делая код менее читаемым (непонятно, откуда взялась функция) и может привести к случайному переопределению существующих имен.
        
- **"Объясните назначение конструкции if __name__ == '__main__':"**
    
    - Ответ: Этот блок кода выполняется только тогда, когда файл запущен как самостоятельный скрипт, а не когда он импортирован как модуль в другой файл. Это позволяет отделить исполняемую часть (например, тесты) от библиотечной.