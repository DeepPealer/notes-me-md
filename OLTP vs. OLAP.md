tags: [data-engineering, database, data-warehouse, olap, oltp, bigdata, interviewprep]  
alias: [OLAP, OLTP, Аналитическая обработка, Транзакционная обработка]  
related: [[ETL / ELT Concepts]], [[Data Warehousing]], [[SQL]], [[Индексы (Indexes)]]

**OLTP (Online Transaction Processing)** и **OLAP (Online Analytical Processing)** — это две разные категории систем обработки данных, оптимизированные для совершенно разных задач.

> **Простая аналогия**:
> 
> - **OLTP** — это **кассир в супермаркете**. Он выполняет множество мелких, быстрых операций: "продать товар", "принять оплату", "проверить остаток". Его задача — быстро обслужить текущего клиента.
>     
> - **OLAP** — это **аналитик в главном офисе**. Он анализирует огромные объемы данных о продажах за год, чтобы ответить на сложные вопросы: "Какой товар был самым прибыльным в каждом регионе?", "Как сезонность влияет на продажи?". Его задача — дать глубокое понимание бизнеса.
>     

---

## [[OLTP]] (Online Transaction Processing) — Транзакционная обработка

- **Назначение**: Поддержка текущей, повседневной операционной деятельности бизнеса. Это системы, с которыми напрямую взаимодействуют пользователи или другие приложения.
    
- **Тип операций**: Множество коротких, быстрых, атомарных транзакций. В основном это INSERT, UPDATE, DELETE и простые SELECT по ключу.
    
- **Данные**: Всегда самые свежие, актуальные на данный момент.
    
- **Цель оптимизации**: **Скорость** и **надежность** транзакций. Система должна обрабатывать тысячи мелких запросов в секунду.
    
- **Структура данных**: **Нормализованная** (обычно 3-я нормальная форма). Данные разнесены по множеству таблиц, чтобы избежать дублирования и обеспечить целостность.
    
- **[[Индексы (Indexes)]]**: Оптимизированы для быстрого поиска, вставки и обновления отдельных строк.
    
- **Примеры**:
    
    - Система бронирования авиабилетов.
        
    - Интернет-магазин.
        
    - Банковская система.
        
    - Любая "продакшн" база данных, которая обслуживает веб-сайт или приложение.
        

---

## [[OLAP]] (Online Analytical Processing) — Аналитическая обработка

- **Назначение**: Анализ исторических данных для поддержки принятия бизнес-решений. Это системы для бизнес-аналитиков, Data Scientist'ов и топ-менеджеров.
    
- **Тип операций**: Сложные, "тяжелые" запросы, которые читают огромные объемы данных, но редко их изменяют. В основном это SELECT с большим количеством JOIN'ов, GROUP BY и [[Оконные функции в SQL (Window Functions)|оконных функций]].
    
- **Данные**: Исторические, агрегированные, часто импортированные из нескольких OLTP-систем.
    
- **Цель оптимизации**: **Скорость выполнения сложных аналитических запросов**. Система должна уметь быстро "сканировать" и агрегировать миллиарды строк.
    
- **Структура данных**: **Денормализованная**. Часто используется модель "звезда" (star schema) или "снежинка" (snowflake schema), где есть большая **таблица фактов** (например, продажи) и небольшие **таблицы измерений** (например, время, клиенты, товары).
    
- **Тип хранения**: Часто **колоночное** (columnar storage). Данные хранятся по колонкам, а не по строкам, что резко ускоряет запросы, которые читают только несколько колонок из широкой таблицы.
    
- **Примеры**:
    
    - [[Data Warehousing|Хранилище данных (Data Warehouse)]].
        
    - Системы бизнес-аналитики (BI).
        
    - OLAP-кубы.
        

---

### Связь с [[ETL / ELT Concepts|ETL/ELT]]

Процессы ETL/ELT — это мост между мирами OLTP и OLAP.

- Данные **извлекаются (Extract)** из одной или нескольких **OLTP**-систем.
    
- Затем они **трансформируются и загружаются (Transform, Load)** в **OLAP**-систему.
    

---

### Сводное сравнение

|   |   |   |
|---|---|---|
|Характеристика|OLTP (Транзакционная)|OLAP (Аналитическая)|
|**Основная задача**|Запуск бизнеса (Run the business)|Анализ бизнеса (Analyze the business)|
|**Пользователи**|Кассиры, операторы, фронтенд-приложения|Аналитики, Data Scientist'ы, менеджеры|
|**Операции**|INSERT, UPDATE, DELETE, простые SELECT|Сложные SELECT с агрегациями|
|**Источник данных**|Первичный, данные реального времени|Вторичный, исторические данные из OLTP|
|**Нормализация**|Высокая (3NF)|Низкая (денормализация, схема "звезда")|
|**Объем данных/запрос**|Единичные записи|Миллионы/миллиарды записей|
|**Скорость ответа**|Требуется мгновенная|Может занимать секунды/минуты|
|**Пример системы**|База данных интернет-магазина (PostgreSQL, MySQL)|Хранилище данных (Snowflake, BigQuery, ClickHouse)|

---

### Популярные вопросы на собеседовании

- **"В чем основное различие между OLTP и OLAP?"**
    
- **"Почему для аналитики не используют 'продакшн' (OLTP) базу данных напрямую?"**
    
    - Ответ: По двум причинам. Во-первых, тяжелые аналитические запросы создадут огромную нагрузку на OLTP-базу и замедлят ее работу для основных пользователей. Во-вторых, OLTP-базы не оптимизированы для таких запросов: их нормализованная структура требует сложных JOIN'ов, а построчное хранение делает агрегацию медленной.
        
- **"Опишите типичную схему данных для OLAP-системы."**
    
    - Ответ: Схема "звезда". Она состоит из центральной таблицы фактов, которая содержит числовые показатели (например, сумма_продажи, количество_товара), и нескольких таблиц измерений, соединенных с ней по внешним ключам. Измерения — это контекст факта (кто, что, когда, где купил).
        
- **"Что такое колоночное хранение и почему оно хорошо для OLAP?"**
    
    - Ответ: Это способ хранения данных, при котором значения каждой колонки хранятся вместе на диске. Это идеально для OLAP, так как аналитические запросы часто читают только несколько колонок из очень широкой таблицы. Системе не нужно считывать всю строку, что значительно сокращает объем дискового I/O.
        

---